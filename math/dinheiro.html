<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nosso Dinheiro</title>
<link rel="stylesheet" href="../css/jogos.css">

<style>
    /* body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        background: #f0f0f0;
    } */

    h1 {
        text-align: center;
    }

    .container {
        max-width: 900px;
        margin: auto;
        background: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }

    .options, .dificuldade {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 20px;
        flex-wrap: wrap;
    }

    button {
        padding: 12px 20px;
        border: none;
        background: #0077cc;
        color: white;
        font-size: 18px;
        border-radius: 8px;
        cursor: pointer;
    }

    button:hover {
        background: #005fa3;
    }

    #valor-alvo {
        text-align: center;
        font-size: 20px;
        margin-bottom: 30px;
        font-weight: bold;
    }

    .itens {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 20px;
        padding: 10px;
    }

    .item {
        background: #ffffff;
        border-radius: 8px;
        padding: 10px;
        text-align: center;
        box-shadow: 0 0 5px rgba(0,0,0,0.2);
        cursor: pointer;
        transition: transform 0.1s, background 0.2s;
    }

    .item:hover {
        transform: scale(1.05);
    }

    .item img {
        width: 100%;
        height: auto;
    }

    #resultado {
        text-align: center;
        margin-top: 20px;
        margin-bottom: 20px;
        font-size: 20px;
        font-weight: bold;
    }

    .ok { color: green; }
    .erro { color: red; }

    @media (max-width: 600px) {
        #valor-alvo { font-size: 22px; }
        button { font-size: 16px; }
    }
</style>
</head>
<body>

<div class="container">
    <h1>Nosso Dinheiro</h1>

    <div class="options">
        <button onclick="selecionarTipo('cedulas')">Cédulas</button>
        <button onclick="selecionarTipo('moedas')">Moedas</button>
    </div>

    <div class="dificuldade" style="justify-content:center;">
    <select id="selectDificuldade" onchange="selecionarDificuldade(this.value)" 
            style="padding:12px; font-size:18px; border-radius:8px;">
        <option value="">Selecione a dificuldade</option>
        <option value="facil">Fácil</option>
        <option value="dificil">Difícil</option>
    </select>
</div>

    <div id="valor-alvo">Escolha o tipo e a dificuldade</div>

    <div id="resultado"></div>

    <div id="itens" class="itens"></div>    

    <div class="options" id="proximo"></div>
</div>

<script>
const imagens = {
    cedulas: [
        { valor: 10, img: "img/cedula_10reais.jpg" },
        { valor: 20, img: "img/cedula_20reais.jpg" },
        { valor: 50, img: "img/cedula_50reais.jpg" },
        { valor: 100, img: "img/cedula_100reais.jpg" }
    ],
    moedas: [
        { valor: 1.00, img: "img/moeda_1real.png" },
        { valor: 0.05, img: "img/moeda_5cent.png" },
        { valor: 0.10, img: "img/moeda_10cent.png" },
        { valor: 0.25, img: "img/moeda_25cent.png" },
        { valor: 0.50, img: "img/moeda_50cent.png" }
    ]
};

let valorAlvo = 0;
let somaAtual = 0;
let modo = "";
let dificuldade = "";

function selecionarTipo(t) {
    modo = t;
    tentarIniciar();
}

function selecionarDificuldade(d) {
    dificuldade = d;
    tentarIniciar();
}

function tentarIniciar() {
    if (modo && dificuldade) start();
}

function gerarValorFacil() {
    // O valor deve ser exatamente igual ao valor de um item
    const lista = imagens[modo];
    const item = lista[Math.floor(Math.random() * lista.length)];
    return item.valor;
}

function gerarValorDificil() {
    if (modo === "cedulas") {
        const valores = [10,20,30,40,50,60,70,80,90,100,150,200];
        return valores[Math.floor(Math.random() * valores.length)];
    } else {
        const valores = [0.05,0.10,0.25,0.50,1,1.25,1.50,2,2.75,3,4,5];
        return valores[Math.floor(Math.random() * valores.length)];
    }
}

function start() {
    somaAtual = 0;

    if (dificuldade === "facil") {
        valorAlvo = gerarValorFacil();
    } else {
        valorAlvo = gerarValorDificil();
    }

    document.getElementById("valor-alvo").innerHTML =
        "Valor pedido: <span style='color:#0077cc'>R$ " + valorAlvo.toFixed(2).replace(".", ",") + "</span>";

    mostrarItens();
    document.getElementById("resultado").innerHTML = "";
    document.getElementById("proximo").innerHTML = "";
}

function mostrarItens() {
    const area = document.getElementById("itens");
    area.innerHTML = "";

    imagens[modo].forEach(item => {
        const div = document.createElement("div");
        div.className = "item";
        div.innerHTML = `<img src="${item.img}"><br>R$ ${item.valor.toFixed(2).replace(".", ",")}`;
        div.onclick = () => selecionar(item.valor);
        area.appendChild(div);
    });
}

function selecionar(valor) {
    if (dificuldade === "facil") {
        // No fácil, só pode ser UM item — clique errado reinicia
        if (valor === valorAlvo) {
            document.getElementById("resultado").innerHTML =
                "<span class='ok'>✔ Parabéns! Você acertou!</span>";
            // setTimeout(start, 2000);
        } else {
            document.getElementById("resultado").innerHTML =
                "<span class='erro'>✖ Resposta incorreta! Tente novamente.</span>";
        }

        document.getElementById("proximo").innerHTML ="<button onclick='start()'>Próximo</button>";

        return;
    }

    // Dificuldade difícil (soma)
    somaAtual += valor;

    if (somaAtual.toFixed(2) == valorAlvo.toFixed(2)) {
        document.getElementById("resultado").innerHTML =
            "<span class='ok'>✔ Parabéns! Você acertou!</span>";
            document.getElementById("proximo").innerHTML ="<button onclick='start()'>Próximo</button>";
        // setTimeout(start, 2000);
    } else if (somaAtual > valorAlvo) {
        document.getElementById("resultado").innerHTML =
            "<span class='erro'>✖ Passou do valor! Tente novamente.</span>";
        somaAtual = 0;
        document.getElementById("proximo").innerHTML ="<button onclick='start()'>Próximo</button>";
    } else {
        document.getElementById("resultado").innerHTML =
            "Somando: R$ " + somaAtual.toFixed(2).replace(".", ",");
    }

    
}
</script>

</body>
</html>
